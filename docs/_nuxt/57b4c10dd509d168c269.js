(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{149:function(t,e,n){var i=n(166);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(31).default)("13f1f0ab",i,!0,{sourceMap:!1})},152:function(t,e,n){var i=n(176);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(31).default)("107030a0",i,!0,{sourceMap:!1})},165:function(t,e,n){"use strict";var i=n(149);n.n(i).a},166:function(t,e,n){(t.exports=n(30)(!1)).push([t.i,"\n.content-wrapper[data-v-206e2ec5]{padding:1rem\n}\n.close-wrapper[data-v-206e2ec5]{text-align:right\n}\n.close-button[data-v-206e2ec5]{margin:0;display:inline-block;color:#f55\n}",""])},167:function(t,e,n){"use strict";n.r(e),n.d(e,"locate",function(){return s}),n.d(e,"_createMarker",function(){return c}),n.d(e,"_activateDescriptionUIElement",function(){return l}),n.d(e,"_centerMap",function(){return p}),n.d(e,"_setLocationMarker",function(){return u});var i=n(60),o=n.n(i),a=(n(32),n(6)),r=n.n(a);n(1),n(2),n(3);function s(){var t=this;this.map.locate({enableHighAccuracy:!0}).once("locationfound",function(e){t.location=[e.latlng.lat,e.latlng.lng],t.zoom=16,t.viewCenter=t.location}).once("locationerror",function(){var e=r()(regeneratorRuntime.mark(function e(n){var i,o,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"http://api.petabyet.com/geoip/",e.next=4,fetch("http://api.petabyet.com/geoip/");case 4:return i=e.sent,e.next=7,i.json();case 7:o=e.sent,a=o.latitude,r=o.longitude,t.viewCenter=t.location=[a,r],e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Cannot locate by IP address using "+hostname),console.error(e.t0);case 17:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t){return e.apply(this,arguments)}}())}function c(t,e){var i=this,a=new(n(150).Marker)(t,e);return a.on("click",function(e){i.viewCenter=i.about=o()(t),i.$store.commit("ui/setActiveUIElement","description")}).addTo(this.map),a}function l(){this.$store.commit("ui/setActiveUIElement","description")}function p(t){var e=this;this.$nextTick(function(){e.map.invalidateSize(!0),e.map.setView(t,e.zoom)})}function u(){if(!this.locationMarker){var t=n(150),e=new t.Icon({iconUrl:"https://cdn0.iconfinder.com/data/icons/small-n-flat/24/678111-map-marker-512.png",iconSize:[50,50]});this.locationMarker=new t.Marker(this.location,{icon:e}).addTo(this.map)}this.locationMarker.setLatLng(this.location)}},168:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"default",function(){return i});n(33),n(1),n(2),n(3);function i(){var e=this,i=n(150),o=new i.map(this.$refs.map,{zoomControl:!1,attributionControl:!1});this.map=o,this.locationMarker=null,o.setView(this.viewCenter,this.zoom),t(function(){e.locate()});i.control.attribution({position:"bottomright",prefix:"Drink&Piss"}).addTo(o);i.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:"abcd",maxZoom:19}).addTo(o),i.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:"abcd",maxZoom:19});var a=new i.Icon({iconUrl:"/img/water-drop.png",iconSize:[50,50]});this.markers.forEach(function(t){e._createMarker(t,{icon:a})}),o.on("click",function(t){var n=[t.latlng.lat,t.latlng.lng];e._createMarker(n,{icon:a})})}}.call(this,n(93).setImmediate)},175:function(t,e,n){"use strict";var i=n(152);n.n(i).a},176:function(t,e,n){(t.exports=n(30)(!1)).push([t.i,"\n.content-wrapper[data-v-6f31863e]{display:flex;flex-flow:column;position:absolute;max-width:100%;width:100vw;max-height:100%;height:100vh\n}\n.map-wrapper[data-v-6f31863e]{position:absolute;z-index:0;overflow:hidden\n}\n.map[data-v-6f31863e],.map-wrapper[data-v-6f31863e]{width:100%;height:100%\n}\n.map[data-v-6f31863e]{overflow:visible\n}\n.map-wrapper.with-description .map[data-v-6f31863e]{height:40%\n}\n.locate[data-v-6f31863e]{position:absolute;overflow:hidden;width:3rem;height:3rem;left:1.5rem;bottom:1.5rem;z-index:90;background-image:url(https://www.congresso2017.oet.pt/img/map_marker.png);background-size:contain;background-position:50%;background-repeat:no-repeat;-webkit-filter:brightness(0) invert(1);filter:brightness(0) invert(1)\n}\n.description[data-v-6f31863e]{display:none;position:absolute;bottom:0;left:0;right:0;width:100%;height:60%;z-index:99;background-color:#fff\n}\n.description.active[data-v-6f31863e]{display:block\n}\n.debug[data-v-6f31863e]{position:fixed;top:0;right:0;padding:.25rem;background-color:rgba(0,0,0,.5)\n}\n.debug p[data-v-6f31863e]{padding:0;color:#fff;font-size:.75rem\n}",""])},177:function(t,e,n){"use strict";n.r(e);n(32);var i,o=n(6),a=n.n(o),r=n(24),s=n.n(r),c=(n(1),n(2),n(3),n(29)),l={props:{location:{}},data:function(){return{description:null}},watch:{location:function(t,e){var n=!1;if(e){for(var i in t)if(t[i]!==e[i]){n=!0;break}}else n=!0;n&&this.fetchDescription()},showDescriptionUIElement:function(t){t?this.fetchDescription():this.description=null}},computed:s()({},Object(c.b)({showDescriptionUIElement:"ui/isDescriptionActive"})),mounted:function(){this.fetchDescription()},methods:{fetchDescription:(i=a()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.location){t.next=7;break}return t.next=3,fetch("https://nominatim.osm.org/reverse?format=json&lat=".concat(this.location[0],"&lon=").concat(this.location[1]));case 3:return e=t.sent,t.next=6,e.json();case 6:this.description=t.sent;case 7:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)}),hideDescription:function(){this.$store.commit("ui/setActiveUIElement",null)}}},p=(n(165),n(16)),u=Object(p.a)(l,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"_"},[e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"close-wrapper"},[e("p",{staticClass:"close-button",on:{click:this.hideDescription}},[this._v("Close")])]),this.description?e("p",[this._v(this._s(this.description.display_name))]):this._e()])])},[],!1,null,"206e2ec5",null);u.options.__file="description.vue";e.default=u.exports},178:function(t,e,n){"use strict";n.r(e);var i=n(24),o=n.n(i),a=(n(1),n(2),n(3),n(156),n(29)),r={data:function(){return{viewCenter:[53,26],location:null,zoom:5,map:null,about:null}},components:{DescriptionComponent:n(177).default},watch:{location:"_setLocationMarker",viewCenter:"_centerMap",activeUIElement:function(){var t=this;this.$nextTick(function(){t.map.invalidateSize(!0)})}},computed:o()({},Object(a.b)({showDescriptionUIElement:"ui/isDescriptionActive",markers:"markers/markers"}),Object(a.c)({activeUIElement:function(t){return t.ui.activeUIElement}})),methods:o()({},n(167)),mounted:n(168).default},s=(n(169),n(175),n(16)),c=Object(s.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"_"},[e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"map-wrapper",class:{"with-description":this.showDescriptionUIElement}},[e("div",{ref:"map",staticClass:"map"})]),e("div",{staticClass:"locate",on:{click:this.locate}}),e("DescriptionComponent",{staticClass:"description",class:{active:this.showDescriptionUIElement},attrs:{location:this.about}})],1)])},[],!1,null,"6f31863e",null);c.options.__file="index.vue";e.default=c.exports}}]);